<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LuckyPitch | Smart Betting</title>

    <script
      async
      crossorigin="anonymous"
      data-clerk-publishable-key="pk_test_YWxsb3dlZC1pbnNlY3QtOTguY2xlcmsuYWNjb3VudHMuZGV2JA"
      src="https://allowed-insect-98.clerk.accounts.dev/npm/@clerk/clerk-js@latest/dist/clerk.browser.js"
      type="text/javascript"
    ></script>

    <script src="https://js.stripe.com/v3/"></script>

    <style>
        :root{
            --text: white;
            --box-bg: rgba(0,0,0,0.7);
            --btn-bg: #cde1e3;
            --btn-text: black;
            --primary: #00ff88;
            --stripe: #635bff;
        }

        body.light{
            --text: #111;
            --box-bg: rgba(255,255,255,0.85);
            --btn-bg: #111;
            --btn-text: white;
        }

        *{ margin:0; padding:0; box-sizing:border-box; font-family: 'Segoe UI', Tahoma, sans-serif; }

        body{
            min-height:100vh;
            background: url("Foci.jpg") center/cover no-repeat fixed;
            color:var(--text);
            transition: 0.3s ease;
            overflow-x: hidden;
        }

        body.light { background: url("Focivil.jpeg") center/cover no-repeat fixed; }

        nav{
            display:flex;
            justify-content:space-between;
            align-items:center;
            padding:20px 60px;
            background: rgba(0,0,0,0.3);
            backdrop-filter: blur(10px);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .logo{ font-size:26px; font-weight:900; color: var(--primary); }

        .nav-buttons{ display:flex; gap:12px; align-items: center; }

        button, .btn-link {
            border:none; padding:10px 18px; border-radius:8px;
            cursor:pointer; font-weight:bold; background:var(--btn-bg);
            color:var(--btn-text); text-decoration: none; transition: 0.3s;
        }

        .btn-auth { background: var(--primary); color: #000; }
        .btn-support { background: var(--stripe); color: white; }
        .btn-support:disabled { opacity: 0.6; cursor: not-allowed; }

        .hero{
            min-height:90vh; display:flex; justify-content:center;
            align-items:center; padding:20px;
        }

        .box{
            border: 1px solid rgba(255,255,255,0.1); padding:50px;
            max-width:800px; text-align:center; background:var(--box-bg);
            backdrop-filter: blur(15px); border-radius:30px;
            box-shadow: 0 25px 50px rgba(0,0,0,0.6);
        }

        h1{ font-size:52px; margin-bottom:15px; text-transform: uppercase; font-weight: 800; }
        .kiemelt{ font-weight:bold; font-size: 1.3rem; color: var(--primary); margin-bottom: 25px; }
        p{ line-height:1.8; margin-bottom:20px; font-size: 1.1rem; }
        .divider{ border-top:1px solid rgba(255,255,255,0.2); margin:30px 0; }
        
        .btn-main { 
            margin-top:20px; padding:18px 50px; font-size:20px; 
            border-radius: 50px; display: inline-block;
        }

        #status-msg { color: var(--primary); margin-top: 15px; font-weight: bold; }

        @media (max-width:768px){
            nav{ padding:15px 20px; }
            h1{ font-size:32px; }
            .box{ padding:40px 15px; }
        }
    </style>
</head>
<body>

<nav>
    <div class="logo">LuckyPitch</div>

    <div class="nav-buttons">
        <button id="mod-btn" onclick="toggleTheme()">‚òÄÔ∏è</button>
        <button id="lang-toggle-btn" onclick="toggleLang()">HU üá≠üá∫</button>
        
        <button id="support-btn" class="btn-support" onclick="handleSupport()">Donate</button>
        
        <div id="user-button"></div>
        <div id="auth-links" style="display: none;">
            <button onclick="Clerk.openSignIn()" class="btn-auth" id="login-text">LOGIN</button>
        </div>

        <a href="https://www.facebook.com/profile.php?id=61588443053104" target="_blank">
            <img id="fb-logo" src="facebook-1.png" style="width:30px; vertical-align: middle; margin-left: 5px;">
        </a>
    </div>
</nav>

<section class="hero">
    <div class="box">
        <h1 id="title">Let the wins Begin</h1>
        <p id="kiemelt" class="kiemelt">Where passion meets precision ‚Äî and every decision counts.</p>
        
        <p id="text1">At LuckyPitch, we believe winning isn‚Äôt just about luck ‚Äî it‚Äôs about smart thinking, sharp strategy, and the courage to trust your instincts.</p>

        <div id="status-msg"></div>
        <div class="divider"></div>

        <p id="text2">This is where insight meets opportunity. This is where the game changes. Play smarter. Think sharper. Win bigger.</p>

        <a href="/meccsek" id="cta-link" class="btn-link btn-main">Matches</a>
    </div>
</section>

<script>
// --- KONFIGUR√ÅCI√ì ---
const stripe = Stripe('pk_test_51T2qaQQkKVs47hkTqXwOVadi0o1GiBortnh6rNLqLxHMS7E6CKCQwp4lcwtnk7jIojzDjERp8wuMHNgx5FKqHEUo00uXcI3IS5');

const translations = {
    hu: {
        title: "Kezd≈ëdjenek a Gy≈ëzelmek",
        kiemelt: "Ahol a szenved√©ly tal√°lkozik a precizit√°ssal.",
        text1: "A LuckyPitchn√©l hissz√ºk, hogy a gy≈ëzelem nem csup√°n szerencse k√©rd√©se.",
        text2: "J√°tssz okosabban. Gondolkodj √©lesebben. Nyerj nagyobbat.",
        cta: "Meccsek megtekint√©se",
        langBtn: "EN üá¨üáß",
        login: "BEL√âP√âS",
        support: "T√°mogat√°s",
        loading: "Bet√∂lt√©s...",
        alert: "K√©rlek, jelentkezz be a t√°mogat√°shoz!"
    },
    en: {
        title: "Let the Wins Begin",
        kiemelt: "Where passion meets precision.",
        text1: "At LuckyPitch, we believe winning isn't just about luck.",
        text2: "Play smarter. Think sharper. Win bigger.",
        cta: "Explore Matches",
        langBtn: "HU üá≠üá∫",
        login: "LOGIN",
        support: "Donate",
        loading: "Loading...",
        alert: "Please log in to donate!"
    }
};

// --- T√ÅMOGAT√ÅS KEZEL√âSE ---
async function handleSupport() {
    if (!window.Clerk || !Clerk.user) {
        const lang = localStorage.getItem("lang") || "en";
        alert(translations[lang].alert);
        Clerk.openSignIn();
        return;
    }

    const btn = document.getElementById('support-btn');
    const lang = localStorage.getItem("lang") || "en";
    const originalText = btn.innerText;

    try {
        btn.innerText = translations[lang].loading;
        btn.disabled = true;

        const response = await fetch('/create-checkout-session', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' }
        });

        if (!response.ok) throw new Error("Szerver hiba");

        const session = await response.json();
        if (session.id) {
            await stripe.redirectToCheckout({ sessionId: session.id });
        }
    } catch (err) {
        console.error(err);
        alert("Hiba t√∂rt√©nt. Pr√≥b√°ld √∫jra k√©s≈ëbb.");
        btn.innerText = originalText;
        btn.disabled = false;
    }
}

// --- APP INICIALIZ√ÅL√ÅS ---
async function startApp() {
    try {
        await Clerk.load();
        
        const userBtnDiv = document.getElementById('user-button');
        const authLinks = document.getElementById('auth-links');

        if (Clerk.user) {
            Clerk.mountUserButton(userBtnDiv);
            authLinks.style.display = 'none';
        } else {
            authLinks.style.display = 'block';
        }
    } catch (err) {
        console.error("Clerk error:", err);
        document.getElementById('auth-links').style.display = 'block';
    }

    // URL visszajelz√©s (sikeres fizet√©s ut√°n)
    const urlParams = new URLSearchParams(window.location.search);
    if (urlParams.get('success')) {
        document.getElementById('status-msg').innerText = "‚ù§Ô∏è Thank you for your support!";
        window.history.replaceState({}, document.title, "/");
    }

    updateUI();
}

function updateUI() {
    const lang = localStorage.getItem("lang") || "en";
    const theme = localStorage.getItem("theme") || "dark";
    const data = translations[lang];

    document.getElementById("title").innerText = data.title;
    document.getElementById("kiemelt").innerText = data.kiemelt;
    document.getElementById("text1").innerText = data.text1;
    document.getElementById("text2").innerText = data.text2;
    document.getElementById("cta-link").innerText = data.cta;
    document.getElementById("lang-toggle-btn").innerText = data.langBtn;
    document.getElementById("login-text").innerText = data.login;
    document.getElementById("support-btn").innerText = data.support;

    document.body.classList.toggle("light", theme === "light");
    document.getElementById("mod-btn").innerText = theme === "light" ? "üåô" : "‚òÄÔ∏è";
    // FACEBOOK LOGO V√ÅLT√ÅS
    const fbLogo = document.getElementById("fb-logo");
    fbLogo.src = theme === "light" ? "facebook-2.png" : "facebook-1.png";
}

function toggleLang() {
    const cur = localStorage.getItem("lang") || "en";
    localStorage.setItem("lang", cur === "en" ? "hu" : "en");
    updateUI();
}

function toggleTheme() {
    const cur = localStorage.getItem("theme") || "dark";
    localStorage.setItem("theme", cur === "dark" ? "light" : "dark");
    updateUI();
}

window.addEventListener('load', startApp);
</script>

</body>
</html>

