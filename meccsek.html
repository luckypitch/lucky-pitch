<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LuckyPitch | Meccsek</title>

    <script async crossorigin="anonymous" data-clerk-publishable-key="pk_test_YWxsb3dlZC1pbnNlY3QtOTguY2xlcmsuYWNjb3VudHMuZGV2JA" src="https://allowed-insect-98.clerk.accounts.dev/npm/@clerk/clerk-js@latest/dist/clerk.browser.js" type="text/javascript"></script>

    <style>
        :root {
            --bg: #0f172a;
            --card-bg: rgba(30, 41, 59, 0.7);
            --text: #f8fafc;
            --primary: #00ff88;
            --secondary: #94a3b8;
            --accent: #38bdf8;
        }

        body.light {
            --bg: #f1f5f9;
            --card-bg: rgba(255, 255, 255, 0.9);
            --text: #0f172a;
            --secondary: #475569;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Inter', sans-serif; }

        body {
            background-color: var(--bg);
            color: var(--text);
            transition: all 0.3s ease;
            min-height: 100vh;
        }

        /* Navig√°ci√≥ */
        nav {
            display: flex; justify-content: space-between; align-items: center;
            padding: 1rem 5%; background: rgba(0,0,0,0.2); backdrop-filter: blur(10px);
            position: sticky; top: 0; z-index: 100; border-bottom: 1px solid rgba(255,255,255,0.1);
        }

        .logo { font-size: 1.5rem; font-weight: 800; color: var(--primary); text-decoration: none; }
        .nav-actions { display: flex; gap: 1rem; align-items: center; }

        button {
            padding: 0.5rem 1rem; border-radius: 8px; border: none; cursor: pointer;
            font-weight: 600; transition: 0.2s; background: var(--card-bg); color: var(--text);
        }

        /* Kont√©ner */
        .container { max-width: 1000px; margin: 2rem auto; padding: 0 1rem; }
        
        h2 { margin-bottom: 1.5rem; font-size: 2rem; border-left: 4px solid var(--primary); padding-left: 15px; }

        /* Meccs K√°rty√°k */
        .match-grid { display: grid; gap: 1rem; }

        .match-card {
            background: var(--card-bg);
            border-radius: 16px;
            padding: 1.5rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border: 1px solid rgba(255,255,255,0.05);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            transition: transform 0.2s;
        }

        .match-card:hover { transform: translateY(-2px); border-color: var(--primary); }

        .team-info { display: flex; flex-direction: column; align-items: center; gap: 10px; width: 35%; }
        .team-logo { width: 40px; height: 40px; object-fit: contain; }
        .team-name { font-weight: 700; text-align: center; font-size: 0.9rem; }

        .match-details { text-align: center; width: 30%; }
        .score { font-size: 1.8rem; font-weight: 900; letter-spacing: 5px; color: var(--primary); }
        .match-time { font-size: 0.8rem; color: var(--secondary); margin-top: 5px; }
        .status { 
            display: inline-block; padding: 4px 12px; border-radius: 20px; 
            font-size: 0.7rem; font-weight: 800; text-transform: uppercase;
            background: rgba(0,255,136,0.1); color: var(--primary);
        }

        .loading { text-align: center; padding: 3rem; font-size: 1.2rem; color: var(--secondary); }

        @media (max-width: 600px) {
            .match-card { flex-direction: column; gap: 1rem; }
            .team-info, .match-details { width: 100%; }
        }
    </style>
</head>
<body>

<nav>
    <a href="/" class="logo">LuckyPitch</a>
    <div class="nav-actions">
        <button onclick="toggleTheme()" id="theme-btn">‚òÄÔ∏è</button>
        <button onclick="toggleLang()" id="lang-btn">EN</button>
        <div id="user-button"></div>
    </div>
</nav>

<div class="container">
    <h2 id="page-title">K√∂zelg≈ë Meccsek</h2>
    <div id="match-list" class="match-grid">
        <div class="loading">Meccsek bet√∂lt√©se...</div>
    </div>
</div>

<script>
    // Inicializ√°l√°s
    async function init() {
        await Clerk.load();
        if (Clerk.user) {
            Clerk.mountUserButton(document.getElementById('user-button'));
        }
        updateUI();
        loadMatches();
    }

    // API H√≠v√°s - Itt jav√≠tottam a logik√°t a t√∂bb meccshez
    async function loadMatches() {
        const list = document.getElementById('match-list');
        try {
            // A szervereden l√©v≈ë /live-matches v√©gpontot h√≠vjuk
            const response = await fetch('/live-matches');
            const data = await response.json();

            if (!data.matches || data.matches.length === 0) {
                list.innerHTML = '<div class="loading">Jelenleg nincs akt√≠v meccs a list√°ban.</div>';
                return;
            }

            list.innerHTML = '';
            data.matches.forEach(match => {
                const matchDate = new Date(match.utcDate).toLocaleString('hu-HU', {
                    month: 'short', day: 'numeric', hour: '2-digit', minute: '2-digit'
                });

                const html = `
                    <div class="match-card">
                        <div class="team-info">
                            <img src="${match.homeTeam.crest}" class="team-logo" onerror="this.src='https://via.placeholder.com/40'">
                            <span class="team-name">${match.homeTeam.shortName || match.homeTeam.name}</span>
                        </div>
                        <div class="match-details">
                            <div class="status">${match.status === 'TIMED' ? 'K√©s≈ëbb' : '√âl≈ë'}</div>
                            <div class="score">${match.score.fullTime.home ?? 0} - ${match.score.fullTime.away ?? 0}</div>
                            <div class="match-time">${matchDate}</div>
                        </div>
                        <div class="team-info">
                            <img src="${match.awayTeam.crest}" class="team-logo" onerror="this.src='https://via.placeholder.com/40'">
                            <span class="team-name">${match.awayTeam.shortName || match.awayTeam.name}</span>
                        </div>
                    </div>
                `;
                list.insertAdjacentHTML('beforeend', html);
            });
        } catch (err) {
            list.innerHTML = '<div class="loading">Hiba t√∂rt√©nt az adatok lek√©r√©sekor.</div>';
        }
    }

    function updateUI() {
        const theme = localStorage.getItem('theme') || 'dark';
        document.body.classList.toggle('light', theme === 'light');
        document.getElementById('theme-btn').innerText = theme === 'light' ? 'üåô' : '‚òÄÔ∏è';
    }

    function toggleTheme() {
        const current = localStorage.getItem('theme') || 'dark';
        localStorage.setItem('theme', current === 'dark' ? 'light' : 'dark');
        updateUI();
    }

    window.addEventListener('load', init);
</script>

</body>
</html>
